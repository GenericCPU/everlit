<!doctype html>
<html>

<!--#include virtual="components/head.html" -->

<body>

<!--#include virtual="components/navbar.html" -->

<!-- Product Container -->
<div class="container mt-4">
    <div class="row justify-content-center mb-5 pb-3">
        <div class="col-md-7 heading-section ftco-animate text-center">
            <h2 class="mb-4">Our Products</h2>
        </div>
    </div>
    <div class="row" id="productsContainer">
        <!-- Products will be added here dynamically -->
    </div>
</div>

<!-- JavaScript for loading products -->
<script>
function loadProducts() {
    fetch('./products.json')
        .then(response => response.json())
        .then(data => {
            let productsContainer = document.getElementById('productsContainer');
            data.forEach(product => {
                let productDiv = document.createElement('div');
                productDiv.className = 'col-md-6 col-lg-3 ftco-animate';
                productDiv.innerHTML = `
                    <div class="block-2">
                        <div class="flipper">
                            <div class="front" style="background-image: url(${product.image});">
                                <div class="box">
                                    <h2>${product.name}</h2>
                                    <p>${product.category}</p>
                                </div>
                            </div>
                            <div class="back">
                                <p>${product.description}</p>
                                <div class="author d-flex">
                                    <div class="image mr-3 align-self-center">
                                        <div class="img" style="background-image: url(${product.image});"></div>
                                    </div>
                                    <div class="name align-self-center">${product.name} <span class="position">${product.category}</span></div>
                                </div>
                            </div>
                        </div>
                    </div>`;
                productsContainer.appendChild(productDiv);
            });
        })
        .catch(error => {
            console.log('Fetch error: ', error.message);
            alert('Failed to load products. Please check the console for details.');
        });
}

// Call the function to load products when the document is ready.
document.addEventListener("DOMContentLoaded", function() {
    loadProducts();
});
</script>

</body>
</html>
